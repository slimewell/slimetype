(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const v of o)if(v.type==="childList")for(const g of v.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function s(o){const v={};return o.integrity&&(v.integrity=o.integrity),o.referrerPolicy&&(v.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?v.credentials="include":o.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function c(o){if(o.ep)return;o.ep=!0;const v=s(o);fetch(o.href,v)}})();var Q={};(function n(a,s,c,o){var v=!!(a.Worker&&a.Blob&&a.Promise&&a.OffscreenCanvas&&a.OffscreenCanvasRenderingContext2D&&a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype.transferControlToOffscreen&&a.URL&&a.URL.createObjectURL),g=typeof Path2D=="function"&&typeof DOMMatrix=="function",R=(function(){if(!a.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var l=t.transferToImageBitmap();e.createPattern(l,"no-repeat")}catch{return!1}return!0})();function T(){}function P(t){var e=s.exports.Promise,l=e!==void 0?e:a.Promise;return typeof l=="function"?new l(t):(t(T,T),null)}var V=(function(t,e){return{transform:function(l){if(t)return l;if(e.has(l))return e.get(l);var d=new OffscreenCanvas(l.width,l.height),u=d.getContext("2d");return u.drawImage(l,0,0),e.set(l,d),d},clear:function(){e.clear()}}})(R,new Map),H=(function(){var t=Math.floor(16.666666666666668),e,l,d={},u=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(h){var f=Math.random();return d[f]=requestAnimationFrame(function i(m){u===m||u+t-1<m?(u=m,delete d[f],h()):d[f]=requestAnimationFrame(i)}),f},l=function(h){d[h]&&cancelAnimationFrame(d[h])}):(e=function(h){return setTimeout(h,t)},l=function(h){return clearTimeout(h)}),{frame:e,cancel:l}})(),me=(function(){var t,e,l={};function d(u){function h(f,i){u.postMessage({options:f||{},callback:i})}u.init=function(i){var m=i.transferControlToOffscreen();u.postMessage({canvas:m},[m])},u.fire=function(i,m,y){if(e)return h(i,null),e;var b=Math.random().toString(36).slice(2);return e=P(function(w){function x(I){I.data.callback===b&&(delete l[b],u.removeEventListener("message",x),e=null,V.clear(),y(),w())}u.addEventListener("message",x),h(i,b),l[b]=x.bind(null,{data:{callback:b}})}),e},u.reset=function(){u.postMessage({reset:!0});for(var i in l)l[i](),delete l[i]}}return function(){if(t)return t;if(!c&&v){var u=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([u])))}catch(h){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",h),null}d(t)}return t}})(),pe={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function ve(t,e){return e?e(t):t}function ge(t){return t!=null}function M(t,e,l){return ve(t&&ge(t[e])?t[e]:pe[e],l)}function ye(t){return t<0?0:Math.floor(t)}function we(t,e){return Math.floor(Math.random()*(e-t))+t}function Z(t){return parseInt(t,16)}function be(t){return t.map(xe)}function xe(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:Z(e.substring(0,2)),g:Z(e.substring(2,4)),b:Z(e.substring(4,6))}}function Me(t){var e=M(t,"origin",Object);return e.x=M(e,"x",Number),e.y=M(e,"y",Number),e}function Ie(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function Ee(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function Ce(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function Le(t,e,l,d,u,h,f,i,m){t.save(),t.translate(e,l),t.rotate(h),t.scale(d,u),t.arc(0,0,1,f,i,m),t.restore()}function ke(t){var e=t.angle*(Math.PI/180),l=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*l-Math.random()*l),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function We(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var l=e.tick++/e.totalTicks,d=e.x+e.random*e.tiltCos,u=e.y+e.random*e.tiltSin,h=e.wobbleX+e.random*e.tiltCos,f=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-l)+")",t.beginPath(),g&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(Te(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(h-d)*.1,Math.abs(f-u)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var i=Math.PI/10*e.wobble,m=Math.abs(h-d)*.1,y=Math.abs(f-u)*.1,b=e.shape.bitmap.width*e.scalar,w=e.shape.bitmap.height*e.scalar,x=new DOMMatrix([Math.cos(i)*m,Math.sin(i)*m,-Math.sin(i)*y,Math.cos(i)*y,e.x,e.y]);x.multiplySelf(new DOMMatrix(e.shape.matrix));var I=t.createPattern(V.transform(e.shape.bitmap),"no-repeat");I.setTransform(x),t.globalAlpha=1-l,t.fillStyle=I,t.fillRect(e.x-b/2,e.y-w/2,b,w),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(h-d)*e.ovalScalar,Math.abs(f-u)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):Le(t,e.x,e.y,Math.abs(h-d)*e.ovalScalar,Math.abs(f-u)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var p=Math.PI/2*3,C=4*e.scalar,L=8*e.scalar,k=e.x,B=e.y,F=5,W=Math.PI/F;F--;)k=e.x+Math.cos(p)*L,B=e.y+Math.sin(p)*L,t.lineTo(k,B),p+=W,k=e.x+Math.cos(p)*C,B=e.y+Math.sin(p)*C,t.lineTo(k,B),p+=W;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(u)),t.lineTo(Math.floor(h),Math.floor(f)),t.lineTo(Math.floor(d),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function Se(t,e,l,d,u){var h=e.slice(),f=t.getContext("2d"),i,m,y=P(function(b){function w(){i=m=null,f.clearRect(0,0,d.width,d.height),V.clear(),u(),b()}function x(){c&&!(d.width===o.width&&d.height===o.height)&&(d.width=t.width=o.width,d.height=t.height=o.height),!d.width&&!d.height&&(l(t),d.width=t.width,d.height=t.height),f.clearRect(0,0,d.width,d.height),h=h.filter(function(I){return We(f,I)}),h.length?i=H.frame(x):w()}i=H.frame(x),m=w});return{addFettis:function(b){return h=h.concat(b),y},canvas:t,promise:y,reset:function(){i&&H.cancel(i),m&&m()}}}function Y(t,e){var l=!t,d=!!M(e||{},"resize"),u=!1,h=M(e,"disableForReducedMotion",Boolean),f=v&&!!M(e||{},"useWorker"),i=f?me():null,m=l?Ie:Ee,y=t&&i?!!t.__confetti_initialized:!1,b=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,w;function x(p,C,L){for(var k=M(p,"particleCount",ye),B=M(p,"angle",Number),F=M(p,"spread",Number),W=M(p,"startVelocity",Number),Ae=M(p,"decay",Number),Fe=M(p,"gravity",Number),Oe=M(p,"drift",Number),te=M(p,"colors",be),Re=M(p,"ticks",Number),re=M(p,"shapes"),qe=M(p,"scalar"),Ne=!!M(p,"flat"),ne=Me(p),oe=k,K=[],De=t.width*ne.x,ze=t.height*ne.y;oe--;)K.push(ke({x:De,y:ze,angle:B,spread:F,startVelocity:W,color:te[oe%te.length],shape:re[we(0,re.length)],ticks:Re,decay:Ae,gravity:Fe,drift:Oe,scalar:qe,flat:Ne}));return w?w.addFettis(K):(w=Se(t,K,m,C,L),w.promise)}function I(p){var C=h||M(p,"disableForReducedMotion",Boolean),L=M(p,"zIndex",Number);if(C&&b)return P(function(W){W()});l&&w?t=w.canvas:l&&!t&&(t=Ce(L),document.body.appendChild(t)),d&&!y&&m(t);var k={width:t.width,height:t.height};i&&!y&&i.init(t),y=!0,i&&(t.__confetti_initialized=!0);function B(){if(i){var W={getBoundingClientRect:function(){if(!l)return t.getBoundingClientRect()}};m(W),i.postMessage({resize:{width:W.width,height:W.height}});return}k.width=k.height=null}function F(){w=null,d&&(u=!1,a.removeEventListener("resize",B)),l&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,y=!1)}return d&&!u&&(u=!0,a.addEventListener("resize",B,!1)),i?i.fire(p,k,F):x(p,k,F)}return I.reset=function(){i&&i.reset(),w&&w.reset()},I}var _;function ee(){return _||(_=Y(null,{useWorker:!0,resize:!0})),_}function Te(t,e,l,d,u,h,f){var i=new Path2D(t),m=new Path2D;m.addPath(i,new DOMMatrix(e));var y=new Path2D;return y.addPath(m,new DOMMatrix([Math.cos(f)*u,Math.sin(f)*u,-Math.sin(f)*h,Math.cos(f)*h,l,d])),y}function Be(t){if(!g)throw new Error("path confetti are not supported in this browser");var e,l;typeof t=="string"?e=t:(e=t.path,l=t.matrix);var d=new Path2D(e),u=document.createElement("canvas"),h=u.getContext("2d");if(!l){for(var f=1e3,i=f,m=f,y=0,b=0,w,x,I=0;I<f;I+=2)for(var p=0;p<f;p+=2)h.isPointInPath(d,I,p,"nonzero")&&(i=Math.min(i,I),m=Math.min(m,p),y=Math.max(y,I),b=Math.max(b,p));w=y-i,x=b-m;var C=10,L=Math.min(C/w,C/x);l=[L,0,0,L,-Math.round(w/2+i)*L,-Math.round(x/2+m)*L]}return{type:"path",path:e,matrix:l}}function Pe(t){var e,l=1,d="#000000",u='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,l="scalar"in t?t.scalar:l,u="fontFamily"in t?t.fontFamily:u,d="color"in t?t.color:d);var h=10*l,f=""+h+"px "+u,i=new OffscreenCanvas(h,h),m=i.getContext("2d");m.font=f;var y=m.measureText(e),b=Math.ceil(y.actualBoundingBoxRight+y.actualBoundingBoxLeft),w=Math.ceil(y.actualBoundingBoxAscent+y.actualBoundingBoxDescent),x=2,I=y.actualBoundingBoxLeft+x,p=y.actualBoundingBoxAscent+x;b+=x+x,w+=x+x,i=new OffscreenCanvas(b,w),m=i.getContext("2d"),m.font=f,m.fillStyle=d,m.fillText(e,I,p);var C=1/l;return{type:"bitmap",bitmap:i.transferToImageBitmap(),matrix:[C,0,0,C,-b*C/2,-w*C/2]}}s.exports=function(){return ee().apply(this,arguments)},s.exports.reset=function(){ee().reset()},s.exports.create=Y,s.exports.shapeFromPath=Be,s.exports.shapeFromText=Pe})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Q,!1);const je=Q.exports;Q.exports.create;const ae=["the","be","of","and","a","to","in","he","have","it","that","for","they","I","with","as","not","on","she","at","by","this","we","you","do","but","from","or","which","one","would","all","will","there","say","who","make","when","can","more","if","no","man","out","other","so","what","time","up","go","about","than","into","could","state","only","new","year","some","take","come","these","know","see","use","get","like","then","first","any","work","now","may","such","give","over","think","most","even","find","day","also","after","way","many","must","look","before","great","back","through","long","where","much","should","well","people","down","own","just","because","good","each","those","feel","seem","how","high","too","place","little","world","very","still","nation","hand","old","life","tell","write","become","here","show","house","both","between","need","mean","call","develop","under","last","right","move","thing","general","school","never","same","another","begin","while","number","part","turn","real","leave","might","want","point","form","off","child","few","small","since","against","ask","late","home","interest","large","person","end","open","public","follow","during","present","without","again","hold","govern","around","possible","head","consider","word","program","problem","however","lead","system","set","order","eye","plan","run","keep","face","fact","group","play","stand","increase","early","course","change","help","line","quest","void","pixel","cyber","neon","flux","wave","pulse","echo","drift","glow","haze","mist","rain","soul","star","moon","sky","blue","dark","light","night","zero","one","code","data","link","node","grid","core","base","acid","bass","beat","drum","flow","jazz","funk","vibe","zone","zen","art","ink","pen","key","lock","door","gate","path","road","city","town","park","lake","sea","ocean","river","mountain","forest","tree","leaf","flower","bloom","grow","root","seed","soil","earth","wind","fire","water","ice","snow","storm","cloud","rain","sun","star","space","time","warp","speed","drive","ship","boat","car","plane","train","bike","ride","walk","run","jump","fly","swim","dive","sink","float","drift","glide","slide","slip","fall","rise","lift","drop","spin","turn","roll","rock","stone","sand","dust","ash","smoke","steam","fog","mist","haze","blur","focus","sharp","clear","clean","pure","fresh","cool","warm","hot","cold","soft","hard","rough","smooth","flat","round","square","cube","sphere","cone","line","dot","point","shape","form","color","paint","draw","sketch","trace","print","type","text","font","style","mode","mood","tone","tune","note","song","sound","noise","voice","word","talk","speak","say","tell","ask","hear","listen","look","see","watch","view","scan","read","write","learn","know","think","mind","brain","idea","thought","dream","wish","hope","love","hate","fear","anger","joy","sad","happy","calm","peace","war","fight","win","lose","game","play","sport","team","group","crowd","solo","duo","trio","band","club","party","event","show","stage","scene","act","role","cast","crew","film","movie","video","image","photo","pic","cam","lens","zoom","focus","flash","light","dark","shadow","shade","tint","hue","sat","val","red","green","blue","cyan","magenta","yellow","black","white","gray","grey","silver","gold","copper","bronze","metal","steel","iron","rust","glass","wood","plastic","paper","cloth","silk","wool","cotton","linen","denim","leather","skin","bone","blood","sweat","tear","smile","laugh","cry","shout","scream","whisper","breath","breathe","air","gas","fuel","oil","power","energy","force","mass","speed","rate","time","clock","watch","hour","minute","second","moment","now","then","later","soon","never","always","ever","forever","once","twice","thrice","first","second","third","last","next","prev","start","stop","end","begin","finish","done","ready","set","go"],r={words:[],currentWordIndex:0,currentLetterIndex:0,typedHistory:[],isActive:!1,startTime:null,wordStates:[],errors:0,mode:"words",value:25,timer:null,timeLeft:0},O=document.getElementById("words"),E=document.getElementById("input-field"),$=document.getElementById("caret"),le=document.getElementById("wpm"),ie=document.getElementById("accuracy"),q=document.getElementById("timer"),$e=document.getElementById("progress-stat"),G=$e.querySelector(".stat-label"),X=document.getElementById("restart-btn"),z=document.getElementById("results"),Ue=document.getElementById("result-wpm"),Ve=document.getElementById("result-accuracy"),He=document.getElementById("result-characters"),Ze=document.getElementById("new-test-btn"),de=document.querySelectorAll("#word-count-selector .config-btn"),J=document.getElementById("timed-btn"),ce=document.querySelectorAll("#time-selector .config-btn"),A=document.querySelector("#endless-group .config-btn");function ue(n){const a=[];let s="";for(let c=0;c<n;c++){let o;do o=ae[Math.floor(Math.random()*ae.length)];while(o===s);a.push(o),s=o}return a}function j(){const n=document.getElementById("timed-group"),a=document.getElementById("time-selector");document.getElementById("endless-group"),de.forEach(s=>{r.mode==="words"&&parseInt(s.dataset.value)===r.value?s.classList.add("active"):s.classList.remove("active")}),r.mode==="timed"?(n.classList.add("collapsed"),a.classList.remove("collapsed"),ce.forEach(s=>{parseInt(s.dataset.value)===r.value?s.classList.add("active"):s.classList.remove("active")}),A&&A.classList.remove("active")):r.mode==="endless"?(n.classList.remove("collapsed"),a.classList.add("collapsed"),J.classList.remove("active"),A&&A.classList.add("active")):(n.classList.remove("collapsed"),a.classList.add("collapsed"),J.classList.remove("active"),A&&A.classList.remove("active")),r.mode==="words"?(G.textContent="Words",q.textContent="0"):r.mode==="timed"?(G.textContent="Time",q.textContent=r.value):(G.textContent="Words",q.textContent="0")}function S(){r.timer&&clearInterval(r.timer);let n=50;r.mode==="words"?n=r.value:r.mode==="timed"&&(n=100),r.words=ue(n),r.currentWordIndex=0,r.currentLetterIndex=0,r.typedHistory=[],r.isActive=!1,r.startTime=null,r.wordStates=r.words.map(()=>({typed:"",completed:!1})),r.errors=0,r.mode==="timed"?r.timeLeft=r.value:r.timeLeft=0,O.innerHTML="",r.words.forEach((a,s)=>{const c=document.createElement("div");c.className="word",c.dataset.wordIndex=s,a.split("").forEach((o,v)=>{const g=document.createElement("span");g.className="letter",g.textContent=o,g.dataset.letterIndex=v,c.appendChild(g)}),O.appendChild(c)}),document.querySelector(".word").classList.add("current"),N(),j(),z.style.display="none",X.style.display="flex",document.body.classList.remove("focus-mode"),O.classList.remove("blur"),E.value="",E.focus(),le.textContent="0",ie.textContent="100%",document.removeEventListener("keydown",fe)}function _e(){r.mode==="timed"&&(r.timer=setInterval(()=>{r.timeLeft--,q.textContent=r.timeLeft,r.timeLeft<=0&&D()},1e3))}function N(){const n=document.querySelector(".word.current");if(!n)return;const a=n.querySelector(`.letter[data-letter-index="${r.currentLetterIndex}"]`),s=n.getBoundingClientRect(),c=document.querySelector(".typing-area").getBoundingClientRect();if(s.top>c.top+100){const o=s.top-c.top-20;O.scrollTo({top:O.scrollTop+o,behavior:"smooth"})}if(a){const o=a.getBoundingClientRect();$.style.left=`${o.left-c.left}px`,$.style.top=`${o.top-c.top}px`}else $.style.left=`${s.right-c.left}px`,$.style.top=`${s.top-c.top}px`}function Ke(){if(!r.isActive||!r.startTime)return 0;const n=(Date.now()-r.startTime)/1e3/60;if(n===0)return 0;let a=0;for(let c=0;c<=r.currentWordIndex;c++){const o=r.wordStates[c]?.typed||"";a+=Math.max(o.length,r.words[c].length)}const s=a/5;return Math.round(s/n)}function Ge(){let n=0,a=0;for(let s=0;s<=r.currentWordIndex;s++){const c=r.wordStates[s]?.typed||"",o=r.words[s];if(!o)continue;const v=Math.min(c.length,o.length);for(let g=0;g<v;g++)n++,c[g]===o[g]&&a++;c.length>o.length&&(n+=c.length-o.length),(s<r.currentWordIndex||r.wordStates[s].completed)&&o.length>c.length&&(n+=o.length-c.length)}return n+=r.errors,n>0?Math.round(a/n*100):100}function he(){le.textContent=Ke(),ie.textContent=`${Ge()}%`,(r.mode==="words"||r.mode==="endless")&&(q.textContent=r.currentWordIndex)}function U(n,a){const s=document.querySelector(`.word[data-word-index="${n}"]`);if(!s)return;const c=r.words[n];s.querySelectorAll(".letter").forEach(o=>{o.classList.remove("correct","incorrect")}),s.querySelectorAll(".letter.extra").forEach(o=>o.remove());for(let o=0;o<a.length;o++){const v=s.querySelector(`.letter[data-letter-index="${o}"]`);if(v)a[o]===c[o]?v.classList.add("correct"):v.classList.add("incorrect");else{const g=document.createElement("span");g.className="letter extra",g.textContent=a[o],s.appendChild(g)}}if(r.wordStates[n].completed)for(let o=a.length;o<c.length;o++){const v=s.querySelector(`.letter[data-letter-index="${o}"]`);v&&v.classList.add("incorrect")}}function se(){const n=document.querySelector(".word.current");if(!n)return;if(r.wordStates[r.currentWordIndex].completed=!0,n.classList.remove("current"),r.currentWordIndex++,r.currentLetterIndex=0,r.mode==="words"&&r.currentWordIndex>=r.value){D();return}if((r.mode==="endless"||r.mode==="timed")&&r.currentWordIndex>=r.words.length-10){const s=ue(20);r.words.push(...s),s.forEach((c,o)=>{const v=r.words.length-20+o;r.wordStates.push({typed:"",completed:!1});const g=document.createElement("div");g.className="word",g.dataset.wordIndex=v,c.split("").forEach((R,T)=>{const P=document.createElement("span");P.className="letter",P.textContent=R,P.dataset.letterIndex=T,g.appendChild(P)}),O.appendChild(g)})}if(r.currentWordIndex>=r.words.length){D();return}const a=document.querySelector(`.word[data-word-index="${r.currentWordIndex}"]`);a?(a.classList.add("current"),E.value=r.wordStates[r.currentWordIndex]?.typed||"",U(r.currentWordIndex,E.value),N()):D()}function Je(){if(r.currentWordIndex<=0)return;const n=document.querySelector(".word.current");if(!n)return;n.classList.remove("current"),r.currentWordIndex--;const a=document.querySelector(`.word[data-word-index="${r.currentWordIndex}"]`);a&&(a.classList.add("current"),E.value=r.wordStates[r.currentWordIndex].typed||"",r.currentLetterIndex=E.value.length,r.wordStates[r.currentWordIndex].completed=!1,U(r.currentWordIndex,E.value),N(),E.focus())}function Qe(n){if(!r.isActive&&E.value.length>0){r.isActive=!0,r.startTime=Date.now(),document.body.classList.add("focus-mode");const s=document.querySelector(".help-text");s&&(s.style.display="none"),_e()}const a=E.value;if(r.wordStates[r.currentWordIndex].typed=a,U(r.currentWordIndex,a),r.currentLetterIndex=a.length,N(),he(),r.mode==="words"&&r.currentWordIndex===r.value-1){const s=r.words[r.currentWordIndex];a.length>=s.length&&setTimeout(()=>{r.wordStates[r.currentWordIndex].completed=!0,D()},100)}}function Xe(n){if(n.key>="0"&&n.key<="9"){n.preventDefault();return}if(n.key==="Enter"&&!n.shiftKey){n.preventDefault(),se();return}if(n.key==="Backspace"&&E.value.length===0&&r.currentWordIndex>0){n.preventDefault(),Je();return}if(n.key===" "){if(!r.isActive&&z.style.display==="flex"){n.preventDefault(),S();return}if(!r.wordStates[r.currentWordIndex].completed){n.preventDefault();const a=r.words[r.currentWordIndex],s=E.value;if(s.length>=a.length)se();else{r.errors++;const c=s+" ";E.value=c,r.wordStates[r.currentWordIndex].typed=c,U(r.currentWordIndex,c),r.currentLetterIndex=c.length,N(),he()}return}}}function D(){r.isActive=!1,r.timer&&clearInterval(r.timer),E.blur(),document.body.classList.remove("focus-mode"),O.classList.add("blur");const n=(Date.now()-r.startTime)/1e3/60;let a=0,s=0;for(let v=0;v<r.currentWordIndex;v++){const g=r.wordStates[v]?.typed||"",R=r.words[v];for(let T=0;T<Math.max(g.length,R.length);T++)a++,g[T]===R[T]&&s++}const c=n>0?Math.round(a/5/n):0,o=a>0?Math.round(s/a*100):100;Ue.textContent=c,Ve.textContent=`${o}%`,He.textContent=a,z.style.display="flex",X.style.display="none",je({particleCount:100,spread:70,origin:{y:.6},colors:["#a8e6cf","#ff8b94","#ffaaa5","#ffd3b6","#dcedc1"]}),document.addEventListener("keydown",fe)}function fe(n){n.key==="Enter"&&(n.preventDefault(),S())}de.forEach(n=>{n.addEventListener("click",()=>{r.mode="words",r.value=parseInt(n.dataset.value),j(),S()})});J.addEventListener("click",()=>{r.mode="timed",r.value=30,j(),S()});A&&A.addEventListener("click",()=>{r.mode="endless",j(),S()});ce.forEach(n=>{n.addEventListener("click",()=>{r.value=parseInt(n.dataset.value),j(),S()})});document.addEventListener("keydown",n=>{n.key==="Tab"&&(n.preventDefault(),S())});E.addEventListener("input",Qe);E.addEventListener("keydown",Xe);X.addEventListener("click",S);Ze.addEventListener("click",S);document.addEventListener("click",n=>{n.target.closest(".config-bar")||(!z.style.display||z.style.display==="none")&&E.focus()});window.addEventListener("resize",N);S();
