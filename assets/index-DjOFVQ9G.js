(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const g of s)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function a(s){const g={};return s.integrity&&(g.integrity=s.integrity),s.referrerPolicy&&(g.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?g.credentials="include":s.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(s){if(s.ep)return;s.ep=!0;const g=a(s);fetch(s.href,g)}})();const r={words:[],currentWordIndex:0,currentLetterIndex:0,typedHistory:[],isActive:!1,startTime:null,wordStates:[],errors:0,mode:"words",value:25,timer:null,timeLeft:0};var G={};(function o(n,a,d,s){var g=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),v=typeof Path2D=="function"&&typeof DOMMatrix=="function",I=(function(){if(!n.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var l=t.transferToImageBitmap();e.createPattern(l,"no-repeat")}catch{return!1}return!0})();function k(){}function R(t){var e=a.exports.Promise,l=e!==void 0?e:n.Promise;return typeof l=="function"?new l(t):(t(k,k),null)}var j=(function(t,e){return{transform:function(l){if(t)return l;if(e.has(l))return e.get(l);var c=new OffscreenCanvas(l.width,l.height),u=c.getContext("2d");return u.drawImage(l,0,0),e.set(l,c),c},clear:function(){e.clear()}}})(I,new Map),$=(function(){var t=Math.floor(16.666666666666668),e,l,c={},u=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(h){var f=Math.random();return c[f]=requestAnimationFrame(function i(m){u===m||u+t-1<m?(u=m,delete c[f],h()):c[f]=requestAnimationFrame(i)}),f},l=function(h){c[h]&&cancelAnimationFrame(c[h])}):(e=function(h){return setTimeout(h,t)},l=function(h){return clearTimeout(h)}),{frame:e,cancel:l}})(),pe=(function(){var t,e,l={};function c(u){function h(f,i){u.postMessage({options:f||{},callback:i})}u.init=function(i){var m=i.transferControlToOffscreen();u.postMessage({canvas:m},[m])},u.fire=function(i,m,y){if(e)return h(i,null),e;var b=Math.random().toString(36).slice(2);return e=R(function(w){function x(E){E.data.callback===b&&(delete l[b],u.removeEventListener("message",x),e=null,j.clear(),y(),w())}u.addEventListener("message",x),h(i,b),l[b]=x.bind(null,{data:{callback:b}})}),e},u.reset=function(){u.postMessage({reset:!0});for(var i in l)l[i](),delete l[i]}}return function(){if(t)return t;if(!d&&g){var u=["var CONFETTI, SIZE = {}, module = {};","("+o.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([u])))}catch(h){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",h),null}c(t)}return t}})(),ve={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function ge(t,e){return e?e(t):t}function ye(t){return t!=null}function M(t,e,l){return ge(t&&ye(t[e])?t[e]:ve[e],l)}function we(t){return t<0?0:Math.floor(t)}function be(t,e){return Math.floor(Math.random()*(e-t))+t}function U(t){return parseInt(t,16)}function xe(t){return t.map(Me)}function Me(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:U(e.substring(0,2)),g:U(e.substring(2,4)),b:U(e.substring(4,6))}}function Ie(t){var e=M(t,"origin",Object);return e.x=M(e,"x",Number),e.y=M(e,"y",Number),e}function Ee(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function Ce(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function Le(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function ke(t,e,l,c,u,h,f,i,m){t.save(),t.translate(e,l),t.rotate(h),t.scale(c,u),t.arc(0,0,1,f,i,m),t.restore()}function We(t){var e=t.angle*(Math.PI/180),l=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*l-Math.random()*l),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function Se(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var l=e.tick++/e.totalTicks,c=e.x+e.random*e.tiltCos,u=e.y+e.random*e.tiltSin,h=e.wobbleX+e.random*e.tiltCos,f=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-l)+")",t.beginPath(),v&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(Be(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(h-c)*.1,Math.abs(f-u)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var i=Math.PI/10*e.wobble,m=Math.abs(h-c)*.1,y=Math.abs(f-u)*.1,b=e.shape.bitmap.width*e.scalar,w=e.shape.bitmap.height*e.scalar,x=new DOMMatrix([Math.cos(i)*m,Math.sin(i)*m,-Math.sin(i)*y,Math.cos(i)*y,e.x,e.y]);x.multiplySelf(new DOMMatrix(e.shape.matrix));var E=t.createPattern(j.transform(e.shape.bitmap),"no-repeat");E.setTransform(x),t.globalAlpha=1-l,t.fillStyle=E,t.fillRect(e.x-b/2,e.y-w/2,b,w),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(h-c)*e.ovalScalar,Math.abs(f-u)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):ke(t,e.x,e.y,Math.abs(h-c)*e.ovalScalar,Math.abs(f-u)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var p=Math.PI/2*3,L=4*e.scalar,W=8*e.scalar,S=e.x,P=e.y,O=5,B=Math.PI/O;O--;)S=e.x+Math.cos(p)*W,P=e.y+Math.sin(p)*W,t.lineTo(S,P),p+=B,S=e.x+Math.cos(p)*L,P=e.y+Math.sin(p)*L,t.lineTo(S,P),p+=B;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(u)),t.lineTo(Math.floor(h),Math.floor(f)),t.lineTo(Math.floor(c),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function Te(t,e,l,c,u){var h=e.slice(),f=t.getContext("2d"),i,m,y=R(function(b){function w(){i=m=null,f.clearRect(0,0,c.width,c.height),j.clear(),u(),b()}function x(){d&&!(c.width===s.width&&c.height===s.height)&&(c.width=t.width=s.width,c.height=t.height=s.height),!c.width&&!c.height&&(l(t),c.width=t.width,c.height=t.height),f.clearRect(0,0,c.width,c.height),h=h.filter(function(E){return Se(f,E)}),h.length?i=$.frame(x):w()}i=$.frame(x),m=w});return{addFettis:function(b){return h=h.concat(b),y},canvas:t,promise:y,reset:function(){i&&$.cancel(i),m&&m()}}}function X(t,e){var l=!t,c=!!M(e||{},"resize"),u=!1,h=M(e,"disableForReducedMotion",Boolean),f=g&&!!M(e||{},"useWorker"),i=f?pe():null,m=l?Ee:Ce,y=t&&i?!!t.__confetti_initialized:!1,b=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,w;function x(p,L,W){for(var S=M(p,"particleCount",we),P=M(p,"angle",Number),O=M(p,"spread",Number),B=M(p,"startVelocity",Number),Re=M(p,"decay",Number),Fe=M(p,"gravity",Number),Oe=M(p,"drift",Number),ee=M(p,"colors",xe),Ne=M(p,"ticks",Number),te=M(p,"shapes"),qe=M(p,"scalar"),De=!!M(p,"flat"),re=Ie(p),ne=S,V=[],ze=t.width*re.x,je=t.height*re.y;ne--;)V.push(We({x:ze,y:je,angle:P,spread:O,startVelocity:B,color:ee[ne%ee.length],shape:te[be(0,te.length)],ticks:Ne,decay:Re,gravity:Fe,drift:Oe,scalar:qe,flat:De}));return w?w.addFettis(V):(w=Te(t,V,m,L,W),w.promise)}function E(p){var L=h||M(p,"disableForReducedMotion",Boolean),W=M(p,"zIndex",Number);if(L&&b)return R(function(B){B()});l&&w?t=w.canvas:l&&!t&&(t=Le(W),document.body.appendChild(t)),c&&!y&&m(t);var S={width:t.width,height:t.height};i&&!y&&i.init(t),y=!0,i&&(t.__confetti_initialized=!0);function P(){if(i){var B={getBoundingClientRect:function(){if(!l)return t.getBoundingClientRect()}};m(B),i.postMessage({resize:{width:B.width,height:B.height}});return}S.width=S.height=null}function O(){w=null,c&&(u=!1,n.removeEventListener("resize",P)),l&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,y=!1)}return c&&!u&&(u=!0,n.addEventListener("resize",P,!1)),i?i.fire(p,S,O):x(p,S,O)}return E.reset=function(){i&&i.reset(),w&&w.reset()},E}var H;function Y(){return H||(H=X(null,{useWorker:!0,resize:!0})),H}function Be(t,e,l,c,u,h,f){var i=new Path2D(t),m=new Path2D;m.addPath(i,new DOMMatrix(e));var y=new Path2D;return y.addPath(m,new DOMMatrix([Math.cos(f)*u,Math.sin(f)*u,-Math.sin(f)*h,Math.cos(f)*h,l,c])),y}function Pe(t){if(!v)throw new Error("path confetti are not supported in this browser");var e,l;typeof t=="string"?e=t:(e=t.path,l=t.matrix);var c=new Path2D(e),u=document.createElement("canvas"),h=u.getContext("2d");if(!l){for(var f=1e3,i=f,m=f,y=0,b=0,w,x,E=0;E<f;E+=2)for(var p=0;p<f;p+=2)h.isPointInPath(c,E,p,"nonzero")&&(i=Math.min(i,E),m=Math.min(m,p),y=Math.max(y,E),b=Math.max(b,p));w=y-i,x=b-m;var L=10,W=Math.min(L/w,L/x);l=[W,0,0,W,-Math.round(w/2+i)*W,-Math.round(x/2+m)*W]}return{type:"path",path:e,matrix:l}}function Ae(t){var e,l=1,c="#000000",u='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,l="scalar"in t?t.scalar:l,u="fontFamily"in t?t.fontFamily:u,c="color"in t?t.color:c);var h=10*l,f=""+h+"px "+u,i=new OffscreenCanvas(h,h),m=i.getContext("2d");m.font=f;var y=m.measureText(e),b=Math.ceil(y.actualBoundingBoxRight+y.actualBoundingBoxLeft),w=Math.ceil(y.actualBoundingBoxAscent+y.actualBoundingBoxDescent),x=2,E=y.actualBoundingBoxLeft+x,p=y.actualBoundingBoxAscent+x;b+=x+x,w+=x+x,i=new OffscreenCanvas(b,w),m=i.getContext("2d"),m.font=f,m.fillStyle=c,m.fillText(e,E,p);var L=1/l;return{type:"bitmap",bitmap:i.transferToImageBitmap(),matrix:[L,0,0,L,-b*L/2,-w*L/2]}}a.exports=function(){return Y().apply(this,arguments)},a.exports.reset=function(){Y().reset()},a.exports.create=X,a.exports.shapeFromPath=Pe,a.exports.shapeFromText=Ae})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),G,!1);const $e=G.exports;G.exports.create;const T=document.getElementById("words"),C=document.getElementById("input-field"),N=document.getElementById("caret"),se=document.getElementById("wpm"),le=document.getElementById("accuracy"),q=document.getElementById("timer"),Ue=document.getElementById("progress-stat"),Z=Ue.querySelector(".stat-label"),J=document.getElementById("restart-btn"),ie=document.getElementById("results"),He=document.getElementById("result-wpm"),Ve=document.getElementById("result-accuracy"),Ze=document.getElementById("result-characters"),_e=document.getElementById("new-test-btn"),ce=document.querySelectorAll("#word-count-selector .config-btn"),_=document.getElementById("timed-btn"),de=document.querySelectorAll("#time-selector .config-btn"),F=document.querySelector("#endless-group .config-btn");function ue(){const o=document.getElementById("timed-group"),n=document.getElementById("time-selector");document.getElementById("endless-group"),ce.forEach(a=>{r.mode==="words"&&parseInt(a.dataset.value)===r.value?a.classList.add("active"):a.classList.remove("active")}),r.mode==="timed"?(o.classList.add("collapsed"),n.classList.remove("collapsed"),de.forEach(a=>{parseInt(a.dataset.value)===r.value?a.classList.add("active"):a.classList.remove("active")}),F&&F.classList.remove("active")):r.mode==="endless"?(o.classList.remove("collapsed"),n.classList.add("collapsed"),_.classList.remove("active"),F&&F.classList.add("active")):(o.classList.remove("collapsed"),n.classList.add("collapsed"),_.classList.remove("active"),F&&F.classList.remove("active")),r.mode==="words"?(Z.textContent="Words",q.textContent="0"):r.mode==="timed"?(Z.textContent="Time",q.textContent=r.value):(Z.textContent="Words",q.textContent="0")}function z(){const o=document.querySelector(".word.current");if(!o)return;const n=o.querySelector(`.letter[data-letter-index="${r.currentLetterIndex}"]`),a=o.getBoundingClientRect(),d=document.querySelector(".typing-area").getBoundingClientRect();if(a.top>d.top+100){const s=a.top-d.top-20;T.scrollTo({top:T.scrollTop+s,behavior:"auto"})}if(n){const s=n.getBoundingClientRect();N.style.left=`${s.left-d.left}px`,N.style.top=`${s.top-d.top}px`}else{const s=o.querySelectorAll(".letter");if(s.length>0){const v=s[s.length-1].getBoundingClientRect();N.style.left=`${v.right-d.left}px`,N.style.top=`${v.top-d.top}px`}else N.style.left=`${a.left-d.left}px`,N.style.top=`${a.top-d.top}px`}}function Q(o,n){const a=document.querySelector(`.word[data-word-index="${o}"]`),d=r.words[o];if(!a)return;n.length>d.length?a.classList.add("error"):a.classList.remove("error");const s=a.querySelectorAll(".letter:not(.extra)");a.querySelectorAll(".letter.extra").forEach(v=>v.remove()),s.forEach((v,I)=>{I<n.length?n[I]===d[I]?v.className="letter correct":v.className="letter incorrect":v.className="letter"}),n.length>d.length&&n.slice(d.length).split("").forEach(I=>{const k=document.createElement("span");k.className="letter extra",k.textContent=I,a.appendChild(k)})}function Ke(){if(!r.startTime)return 0;const o=(Date.now()-r.startTime)/1e3/60;if(o===0)return 0;const n=r.currentWordIndex+r.currentLetterIndex/5;return Math.round(n/o)}function Ge(){if(r.typedHistory.length===0&&r.currentLetterIndex===0)return 100;let o=0,n=0;for(let s=0;s<r.currentWordIndex;s++){const g=r.words[s],v=r.wordStates[s]?.typed||"";for(let I=0;I<Math.max(g.length,v.length);I++)n++,g[I]===v[I]&&o++}const a=r.words[r.currentWordIndex],d=C.value;for(let s=0;s<d.length;s++)n++,a[s]===d[s]&&o++;return n>0?Math.round(o/n*100):100}function he(){se.textContent=Ke(),le.textContent=`${Ge()}%`,(r.mode==="words"||r.mode==="endless")&&(q.textContent=r.currentWordIndex)}function Je(o,n,a){He.textContent=o,Ve.textContent=`${n}%`,Ze.textContent=a,ie.style.display="flex",J.style.display="none",$e({particleCount:100,spread:70,origin:{y:.6},colors:["#a8e6cf","#ff8b94","#ffaaa5","#ffd3b6","#dcedc1"]})}const oe=["the","be","of","and","a","to","in","he","have","it","that","for","they","i","with","as","not","on","she","at","by","this","we","you","do","but","from","or","which","one","would","all","will","there","say","who","make","when","can","more","if","no","man","out","other","so","what","time","up","go","about","than","into","could","state","only","new","year","some","take","come","these","know","see","use","get","like","then","first","any","work","now","may","such","give","over","think","most","even","find","day","also","after","way","many","must","look","before","great","back","through","long","where","much","should","well","people","down","own","just","because","good","each","those","feel","seem","how","high","too","place","little","world","very","still","nation","hand","old","life","tell","write","become","here","show","house","both","between","need","mean","call","develop","under","last","right","move","thing","general","school","never","same","another","begin","while","number","part","turn","real","leave","might","want","point","form","off","child","few","small","since","against","ask","late","home","interest","large","person","end","open","public","follow","during","present","without","again","hold","govern","around","possible","head","consider","word","program","problem","however","lead","system","set","order","eye","plan","run","keep","face","fact","group","play","stand","increase","early","course","change","help","line","quest","void","pixel","cyber","neon","flux","wave","pulse","echo","drift","glow","haze","mist","rain","soul","star","moon","sky","blue","dark","light","night","zero","one","code","data","link","node","grid","core","base","acid","bass","beat","drum","flow","jazz","funk","vibe","zone","zen","art","ink","pen","key","lock","door","gate","path","road","city","town","park","lake","sea","ocean","river","mountain","forest","tree","leaf","flower","bloom","grow","root","seed","soil","earth","wind","fire","water","ice","snow","storm","cloud","rain","sun","star","space","time","warp","speed","drive","ship","boat","car","plane","train","bike","ride","walk","run","jump","fly","swim","dive","sink","float","drift","glide","slide","slip","fall","rise","lift","drop","spin","turn","roll","rock","stone","sand","dust","ash","smoke","steam","fog","mist","haze","blur","focus","sharp","clear","clean","pure","fresh","cool","warm","hot","cold","soft","hard","rough","smooth","flat","round","square","cube","sphere","cone","line","dot","point","shape","form","color","paint","draw","sketch","trace","print","type","text","font","style","mode","mood","tone","tune","note","song","sound","noise","voice","word","talk","speak","say","tell","ask","hear","listen","look","see","watch","view","scan","read","write","learn","know","think","mind","brain","idea","thought","dream","wish","hope","love","hate","fear","anger","joy","sad","happy","calm","peace","war","fight","win","lose","game","play","sport","team","group","crowd","solo","duo","trio","band","club","party","event","show","stage","scene","act","role","cast","crew","film","movie","video","image","photo","pic","cam","lens","zoom","focus","flash","light","dark","shadow","shade","tint","hue","sat","val","red","green","blue","cyan","magenta","yellow","black","white","gray","grey","silver","gold","copper","bronze","metal","steel","iron","rust","glass","wood","plastic","paper","cloth","silk","wool","cotton","linen","denim","leather","skin","bone","blood","sweat","tear","smile","laugh","cry","shout","scream","whisper","breath","breathe","air","gas","fuel","oil","power","energy","force","mass","speed","rate","time","clock","watch","hour","minute","second","moment","now","then","later","soon","never","always","ever","forever","once","twice","thrice","first","second","third","last","next","prev","start","stop","end","begin","finish","done","ready","set","go"];function fe(o){const n=[];let a="";for(let d=0;d<o;d++){let s;do s=oe[Math.floor(Math.random()*oe.length)];while(s===a);n.push(s),a=s}return n}function A(){r.timer&&clearInterval(r.timer);let o=50;r.mode==="words"?o=r.value:r.mode==="timed"&&(o=100),r.words=fe(o),r.currentWordIndex=0,r.currentLetterIndex=0,r.typedHistory=[],r.isActive=!1,r.startTime=null,r.wordStates=r.words.map(()=>({typed:"",completed:!1})),r.errors=0,r.mode==="timed"?r.timeLeft=r.value:r.timeLeft=0,T.innerHTML="",r.words.forEach((n,a)=>{const d=document.createElement("div");d.className="word",d.dataset.wordIndex=a,n.split("").forEach((s,g)=>{const v=document.createElement("span");v.className="letter",v.textContent=s,v.dataset.letterIndex=g,d.appendChild(v)}),T.appendChild(d)}),document.querySelector(".word").classList.add("current"),z(),ue(),ie.style.display="none",J.style.display="flex",document.body.classList.remove("focus-mode"),T.classList.remove("blur"),T.scrollTop=0,T.classList.remove("fade-in"),T.offsetWidth,T.classList.add("fade-in"),C.value="",C.focus(),se.textContent="0",le.textContent="100%",document.removeEventListener("keydown",me)}function Qe(){r.mode==="timed"&&(r.timer=setInterval(()=>{r.timeLeft--,q.textContent=r.timeLeft,r.timeLeft<=0&&D()},1e3))}function ae(){const o=document.querySelector(".word.current");if(!o)return;if(r.wordStates[r.currentWordIndex].completed=!0,o.classList.remove("current"),r.currentWordIndex++,r.currentLetterIndex=0,r.mode==="words"&&r.currentWordIndex>=r.value){D();return}if((r.mode==="endless"||r.mode==="timed")&&r.currentWordIndex>=r.words.length-10){const a=fe(20);r.words.push(...a),a.forEach((d,s)=>{const g=r.words.length-20+s;r.wordStates.push({typed:"",completed:!1});const v=document.createElement("div");v.className="word",v.dataset.wordIndex=g,d.split("").forEach((I,k)=>{const R=document.createElement("span");R.className="letter",R.textContent=I,R.dataset.letterIndex=k,v.appendChild(R)}),T.appendChild(v)})}if(r.currentWordIndex>=r.words.length){D();return}const n=document.querySelector(`.word[data-word-index="${r.currentWordIndex}"]`);n?(n.classList.add("current"),C.value=r.wordStates[r.currentWordIndex]?.typed||"",Q(r.currentWordIndex,C.value),z()):D()}function Xe(o){if(!r.isActive&&C.value.length>0){r.isActive=!0,r.startTime=Date.now(),document.body.classList.add("focus-mode");const a=document.querySelector(".help-text");a&&(a.style.display="none"),Qe()}const n=C.value;if(r.wordStates[r.currentWordIndex].typed=n,Q(r.currentWordIndex,n),r.currentLetterIndex=n.length,z(),he(),r.mode==="words"&&r.currentWordIndex===r.value-1){const a=r.words[r.currentWordIndex];n.length>=a.length&&setTimeout(()=>{r.wordStates[r.currentWordIndex].completed=!0,D()},100)}}function Ye(o){if(document.activeElement!==C&&C.focus(),o.key==="Tab"){o.preventDefault(),A();return}if(o.key==="Enter"){o.preventDefault(),r.isActive&&ae();return}if(o.key>="0"&&o.key<="9"){o.preventDefault();return}if(o.key===" "){if(!r.isActive){o.preventDefault();return}if(!r.wordStates[r.currentWordIndex].completed){o.preventDefault();const n=r.words[r.currentWordIndex],a=C.value;if(a.length>=n.length)ae();else{r.errors++;const d=a+" ";C.value=d,r.wordStates[r.currentWordIndex].typed=d,Q(r.currentWordIndex,d),r.currentLetterIndex=d.length,z(),he()}return}}if(o.key==="Backspace"&&C.value.length===0&&r.currentWordIndex>0){o.preventDefault(),document.querySelector(`.word[data-word-index="${r.currentWordIndex-1}"]`);const n=document.querySelector(".word.current");n&&n.classList.remove("current"),r.currentWordIndex--,r.wordStates[r.currentWordIndex].completed=!1;const a=document.querySelector(`.word[data-word-index="${r.currentWordIndex}"]`);a.classList.add("current"),a.classList.remove("error","correct");const d=r.wordStates[r.currentWordIndex].typed;C.value=d,r.currentLetterIndex=d.length,z()}}let K=!1;function D(){r.isActive=!1,r.timer&&clearInterval(r.timer),C.blur(),document.body.classList.remove("focus-mode"),T.classList.add("blur");const o=(Date.now()-r.startTime)/1e3/60;let n=0,a=0;for(let g=0;g<r.currentWordIndex;g++){const v=r.wordStates[g]?.typed||"",I=r.words[g];for(let k=0;k<Math.max(v.length,I.length);k++)n++,v[k]===I[k]&&a++}const d=o>0?Math.round(n/5/o):0,s=n>0?Math.round(a/n*100):100;Je(d,s,n),K=!0,setTimeout(()=>{K=!1},800),document.addEventListener("keydown",me)}function me(o){if(K){o.preventDefault();return}(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),A())}C.addEventListener("input",Xe);window.addEventListener("keydown",Ye);J.addEventListener("click",()=>{C.focus(),A()});_e.addEventListener("click",()=>{A()});ce.forEach(o=>{o.addEventListener("click",()=>{r.mode="words",r.value=parseInt(o.dataset.value),A()})});_.addEventListener("click",()=>{r.mode="timed",r.value=30,ue(),A()});de.forEach(o=>{o.addEventListener("click",()=>{r.mode="timed",r.value=parseInt(o.dataset.value),A()})});F&&F.addEventListener("click",()=>{r.mode="endless",r.value=0,A()});document.querySelector(".typing-area").addEventListener("click",()=>{C.focus()});A();
